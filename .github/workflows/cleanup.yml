name: ðŸ—‘ï¸ Reset Repository

on:
  workflow_dispatch: # æ‰‹åŠ¨è§¦å‘æŒ‰é’®

jobs:
  reset-repo:
    runs-on: ubuntu-latest
    permissions:
      contents: write # å¿…é¡»æœ‰å†™æƒé™

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Delete all wallpapers
        run: |
          # å¼ºåˆ¶åˆ é™¤ wallpapers æ–‡ä»¶å¤¹åŠå…¶å†…å®¹
          rm -rf wallpapers/
          # é‡æ–°åˆ›å»ºä¸€ä¸ªç©ºçš„ wallpapers æ–‡ä»¶å¤¹ï¼ˆé˜²æ­¢è„šæœ¬æ‰¾ä¸åˆ°ç›®å½•æŠ¥é”™ï¼‰
          mkdir wallpapers
          # æ”¾å…¥ä¸€ä¸ª .gitkeep å ä½æ–‡ä»¶ï¼Œç¡®ä¿ç©ºæ–‡ä»¶å¤¹èƒ½è¢« git æäº¤
          touch wallpapers/.gitkeep

      - name: Reset README.md
        run: |
          # å°† README.md çš„å†…å®¹é‡å†™ä¸ºåˆå§‹çŠ¶æ€
          # ä¸‹é¢çš„æ–‡å­—ä½ å¯ä»¥æ ¹æ®å–œå¥½è‡ªå·±æ”¹
          echo "# ðŸŒ„ Daily Inspiration Gallery" > README.md
          echo "" >> README.md
          echo "æ¯å¤©æ›´æ–°çš„è§†è§‰çµæ„Ÿåº“ã€‚ç²¾é€‰ç§¯æžå‘ä¸Šã€éœ‡æ’¼äººå¿ƒçš„å²è¯—çº§å£çº¸ã€‚" >> README.md
          echo "" >> README.md
          echo "---" >> README.md

      - name: Commit changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "ðŸ§¨ Reset repository to initial state"
          file_pattern: "wallpapers/ README.md"
